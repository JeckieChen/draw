### IPv6的优势：  
1.扩展的地址空间：提供了128位的源地址和目的地址，相比与ipv4的32位地址  
2.IPv6不但有更大的地址空间，它还改变了IP协议的一些重要部分  
3.无状态自动配置：IPv6提供了配置机制，主机可以自生成一个可路由的地址  
4.nat/pat将消失：由于公众的ipv6地址数量庞大，将不再需要网络地址/端口地址翻译  
5.消除广播：IPv6不使用3层的广播地址  
  
### IPv6报文  
* version版本（4bits）：**值为6**
* traffic class流量类型（8bits）
* flow label 流标签（20bits）：用来标记的序列或IPv6数据包从一个源发送到一个或多个目的节点的数据包流
* payload length净荷长度（16bits）：允许一个65535字节的最大有效载荷大小
* next header下一报头（8bits）
* hop limit跳数限制（8bits）
* source address源地址（128bits）：  
  ipv6数据包的IP地址是128位  
  **源地址必须是一个单播地址**  
* destination address目的地址（128bits）：  
  128位的IP地址  
  **可以是一个单播或组播地址**  
  没有广播地址，这是一个所有节点的组播地址  
  
### IPv6地址
![ipv6_address](https://github.com/JeckieChen/ipv6/blob/master/ipv6%E5%A4%8D%E4%B9%A0/img/IPv6%E5%9C%B0%E5%9D%80.png)
  
### 配置动态IPv6地址
![ipv6_address2](https://github.com/JeckieChen/ipv6/blob/master/ipv6%E5%A4%8D%E4%B9%A0/img/IPv6%E5%9C%B0%E5%9D%80.png)

### 路由消息宣告
方式一：  
RA消息  
To：FF02::1(向所有IPv6主机发送组播)  
From：FE80::1(本地链路地址)  
前缀：2001:DB8:ACAD:1::  
前缀长度：/64  
|  
\/  
前缀：2001:DB8:ACAD:1::  
前缀长度：/64  
默认网关：FE80::1  
全球单播地址：2001:DB8:ACAD:1: + 端口id  
|  
\/  
EUI-64机制或随机64bit数值  
    
方式二：  
To：FF02::1(向所有IPv6主机发送组播)  
From：FE80::1(本地链路地址)  
前缀：2001:DB8:ACAD:1::  
前缀长度：/64  
|  
\/  
前缀：2001:DB8:ACAD:1::  
前缀长度：/64  
默认网关：FE80::1  
全球单播地址：2001:DB8:ACAD:1: + 端口id  
|  
\/  
EUI-64机制  
  
### EUI-64
MAC:                00:03:6B:E9:D4:80  
嵌入FFFE： 0000 0000：000 0011：0110 1011：1111 1111：1111 1110：1110 1001：1101 0100：1000 0000  
翻转U/L  ：0000 0010：000 0011：0110 1011：1111 1111：1111 1110：1110 1001：1101 0100：1000 0000  
生成EUI  ：        02:03:6B:FF:FE:E9:D4:80  

### IPv4转为IPv6
如：135.75.43.52 按十六进制算出即87.4B.2B.34  
再把前96位补零，它可以被转化为  
0000:0000:0000:0000:0000:0000:874B:2B34或者::874B:2B34  
  
### 链路本地地址
* 用于与同一条链路上的其他设备进行通信
* 不能被路由器进行路由转发
* 只需要在当前链路中保持地址唯一
* 链路本地地址不会被加入ipv6路由表中
* 一台ipv6设备至少需要有一个链路本地地址
* 用于：  
  在获得全局唯一地址之前，与链路中的其他设备进行通信  
  路由器的链路本地地址会被终端设备自动登记为默认网关地址  
  与邻近的路由器交换更新信息  
  
### IPv6组播
`1111 1111` `标志 范围` `组id`
* IPv6中的组播地址结构，其最高位前8位为1
* 标志字段四位，目前只用了最后一位，此位为0，则是一个永久组播地址，1是临时组播地址
* 范围：   
  0：预留  
	1：本地接口范围  
	2：本地链路范围  
	5：本地站点范围  
	8：组织本地范围  
	E：全球范围  
	F：预留  
    
### 节点请求地址-用于重复地址检测
* 地址：FF02::1:FF 00:0010
  
### 任播地址：
* 用来标识一组网络接口（通常属于不同的节点）的地址标识。路由器会将目标地址是任播地址的数据包发送给距离本路由器最近的一个网络接口
  任播地址从单播地址空间中进行分配，使用单播地址的任何格式  
  任播地址仅被用做目标地址，不能作为源地址使用，且仅分配给路由器  
  
### icmpv6错误消息有：
* 目的地不可达消息
* 数据包超大消息
* 超时消息
* 参数消息
  
回显信息：  
* 回显应答：128
* 回显请求：129
  
### 邻居发现协议NDP
* 路由请求信息 133
* 路由宣告信息 134
* 邻居请求信息 135
* 邻居宣告信息 136
  
邻居请求信息与邻居宣告信息：  
* 设备向在同一个子网内的其他设备申请获得其mac地址
* 向申请者提供其申请的消息
* 包含：  
  地址解析  
  重复地址检测（DAD）  
	邻居不可达性检测（NUD）  
  

路由宣告信息：前缀、前缀长度、默认网关、MTU、跳数限制  

无状态自动地址配置（SLAAC）是一种自动为端口设置全局唯一单播地址的机制  
用于：  
* 前缀以及其他相关消息->ND路由宣告  
* 端口id->EUI-64机制或者随机值机制
* 不需要建立DHCPv6服务器

## 问题：
### 论述IPv4和IPv6不同，说明ipv6的优点
  
### IPV6 数据包的源地址必须是 一个（C）
A、组播地址  
B、泛播地址  
C、单播地址  
D、环回地址  
  
### Pv6相对IPv4的改进体现的方面？
三种解决 IPv4 缺陷的 方案：  
* CATNTP(互联 网通 用架构)
* SIPP （增强型简单互联 网协议）
* TVBA (包含更更多地址的 TCP 和 UDP)  
IPv6 优点：  
1. 扩展地址空间  
2. 无状态 自动配置  
3. 清除 NAT/PAT  
4. 消除 广播   
5. 迁移 工具    
Ipv6 与 IPv4 最大的区别是地址空间，IPv4 是 32 位，IPv6 是 128 位  
  
### MAC 地址为 00-10-F8-00-AD-FE ，根据 EUI-64 规范， 生成的 IPV6 接 口地址为
02:10:F8:FF:FE:00:AD:FE

### IPV6 完整地址为 2001:0410:0000:0101:00e0:0000:0000:45ff 的压缩地址表示格式为：
2001：410：0：101：e0：：45ff

### 链路本地地址?
FE80::/10到FEBF::/10

### IPv6地址类型分为
单播地址、泛播地址、组播地址（FF02::1–所有IPv6设备；FF02::2– 所有IPv6 路由器。）

### IPV6 报头结构的下 一报头字段中，TCP 的报头下 一包头编号为（A）
A、6  
B、7  
C、8  
D、9  

### IPV6 数据包的源地址必须是 一个（C）
A、组播地址   
B、泛播地址  
C、单播地址  
D、环回地址  

### 下列列哪 一个 IPV6 地址是错误地址（D）
A、::FFFE  
B、::1  
C、::1：FFFF  
D、::1::FFFF  

### 下列列哪些地址是 IPV6 link-local-unicast  地址（B）
A、FC80::1234  
B、FE80::FFFF  
C、FC20::FFFF  
D、FE20::1234  

### 向所有 IPV6 主句句发送组播的组播地址是（A）
A、FF02::1  
B、FF02::2  
C、FF02::3  
D、FF02::4  

### 以下不属于IPv6报头字段的是（CD）
A. Version  
B. Hop limit  
C. Flags  
D. Padding  

### 关于 IPv6 报文分片处理的说法中，正确的是? (A)
A. 报文分片仅由发出报文的源主机处理  
B. 报文分片仅由发出报文的源路由器处理  
C. IPv6 中报文分片处理与 IPv4 处理过程是一样的  
D. 报文分片并没有使用到 ICMP v6 协议  

### 下面哪一个是有效的 IPv6 地址?(C)
A. 2001:1:0:4F3A:206:AE14  
B. 2001:1:0:4F3A:0:206:AE14   
C. 2001:1:0:4F3A::206:AE14  
D. 2001:1::4F3A::206:AE14  

### 在 IPv6 中，有一种特殊的组播地址，叫被请求节点（Solicited-node）组播地址,它的作用范围是?(A)
A. 链路本地  
B. 站点本地  
C. ISP 内部  
D. 任何范围  

### 节点请求多播地址的前缀是FF02::1:FF00:0000/104
对

### 一个路由器端口只能部署一个IPv6地址
错

### NDP 路由宣告信息包括
前缀、前缀 长度、组播地址（ 目的地址）、参数

### 链路本地地址:
FE80::/10到FEBF::/10 

### ipv6 address __ link-local链路本地地址只需要在当前链路唯一
fe80::1 

### IPv6地址类型分为：
单播地址、泛播地址、组播地址（FF02::1–所有IPv6设备；FF02::2– 所有IPv6 路由器。）

### 当端口配置了__，链路本地地址会自动生成。
全局单播地址时

### ICMPv6错误消息
目的地不可达消息；数据包超大消息；超时消息；参数消息

### Ping命令使用ICMPv6通知消息:
回显请求；回显应答

### 邻居请求消息与邻居宣告消息包含
地址解析；DAD；NUD

### ICMPv6邻居发现协议（NDP）
路由器请求消息；路由器宣告消息；邻居请求消息；邻居宣告消息
